<body>
<div>
<div id="custom-doc">
<div id="hd">
<h1><a href="../../../index.html">Django 5.2.8.dev20251011170327 documentation</a></h1>


</div>
<div id="bd">
<div id="yui-main">
<div>
<div id="ref-contrib-gis-geoquerysets">
<section id="s-gis-queryset-api-reference">
<span id="gis-queryset-api-reference"></span><h1>GIS QuerySet API Reference<a href="#gis-queryset-api-reference" title="Link to this heading">¶</a></h1>
<section id="s-spatial-lookups">
<span id="s-id1"></span><span id="spatial-lookups"></span><span id="id1"></span><h2>Spatial Lookups<a href="#spatial-lookups" title="Link to this heading">¶</a></h2>
<p>The spatial lookups in this section are available for <a href="model-api.html#django.contrib.gis.db.models.GeometryField" title="django.contrib.gis.db.models.GeometryField"><code class="xref py py-class docutils literal notranslate"><span>GeometryField</span></code></a>
and <a href="model-api.html#django.contrib.gis.db.models.RasterField" title="django.contrib.gis.db.models.RasterField"><code class="xref py py-class docutils literal notranslate"><span>RasterField</span></code></a>.</p>
<p>For an introduction, see the <a href="db-api.html#spatial-lookups-intro"><span>spatial lookups introduction</span></a>.  For an overview of what lookups are
compatible with a particular spatial backend, refer to the
<a href="db-api.html#spatial-lookup-compatibility"><span>spatial lookup compatibility table</span></a>.</p>
<section id="s-lookups-with-rasters">
<span id="lookups-with-rasters"></span><h3>Lookups with rasters<a href="#lookups-with-rasters" title="Link to this heading">¶</a></h3>
<p>All examples in the reference below are given for geometry fields and inputs,
but the lookups can be used the same way with rasters on both sides. Whenever
a lookup doesn’t support raster input, the input is automatically
converted to a geometry where necessary using the <a href="https://postgis.net/docs/RT_ST_Polygon.html">ST_Polygon</a> function. See also the
<a href="db-api.html#spatial-lookup-raster"><span>introduction to raster lookups</span></a>.</p>
<p>The database operators used by the lookups can be divided into three categories:</p>
<ul>
<li><p>Native raster support <code class="docutils literal notranslate"><span>N</span></code>: the operator accepts rasters natively on both
sides of the lookup, and raster input can be mixed with geometry inputs.</p></li>
<li><p>Bilateral raster support <code class="docutils literal notranslate"><span>B</span></code>: the operator supports rasters only if both
sides of the lookup receive raster inputs. Raster data is automatically
converted to geometries for mixed lookups.</p></li>
<li><p>Geometry conversion support <code class="docutils literal notranslate"><span>C</span></code>. The lookup does not have native raster
support, all raster data is automatically converted to geometries.</p></li>
</ul>
<p>The examples below show the SQL equivalent for the lookups in the different
types of raster support. The same pattern applies to all spatial lookups.</p>
<table>
<thead>
<tr><th><p>Case</p></th>
<th><p>Lookup</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>N, B</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__contains=rst</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(rast,</span> <span>rst)</span></code></p></td>
</tr>
<tr><td><p>N, B</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__1__contains=(rst,</span> <span>2)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(rast,</span> <span>1,</span> <span>rst,</span> <span>2)</span></code></p></td>
</tr>
<tr><td><p>B, C</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__contains=geom</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(ST_Polygon(rast),</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>B, C</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__1__contains=geom</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(ST_Polygon(rast,</span> <span>1),</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>B, C</p></td>
<td><p><code class="docutils literal notranslate"><span>poly__contains=rst</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(poly,</span> <span>ST_Polygon(rst))</span></code></p></td>
</tr>
<tr><td><p>B, C</p></td>
<td><p><code class="docutils literal notranslate"><span>poly__contains=(rst,</span> <span>1)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(poly,</span> <span>ST_Polygon(rst,</span> <span>1))</span></code></p></td>
</tr>
<tr><td><p>C</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__crosses=rst</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(ST_Polygon(rast),</span> <span>ST_Polygon(rst))</span></code></p></td>
</tr>
<tr><td><p>C</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__1__crosses=(rst,</span> <span>2)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(ST_Polygon(rast,</span> <span>1),</span> <span>ST_Polygon(rst,</span> <span>2))</span></code></p></td>
</tr>
<tr><td><p>C</p></td>
<td><p><code class="docutils literal notranslate"><span>rast__crosses=geom</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(ST_Polygon(rast),</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>C</p></td>
<td><p><code class="docutils literal notranslate"><span>poly__crosses=rst</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(poly,</span> <span>ST_Polygon(rst))</span></code></p></td>
</tr>
</tbody>
</table>
<p>Spatial lookups with rasters are only supported for PostGIS backends
(denominated as PGRaster in this section).</p>
</section>
<section id="s-bbcontains">
<span id="s-std-fieldlookup-bbcontains"></span><span id="bbcontains"></span><span id="std-fieldlookup-bbcontains"></span><h3><code class="docutils literal notranslate"><span>bbcontains</span></code><a href="#bbcontains" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Contain.html">PostGIS</a>,
MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>Tests if the geometry or raster field’s bounding box completely contains the
lookup geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__bbcontains</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>poly</span> <span>~</span> <span>geom</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRContains(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRContains(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>MbrContains(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-bboverlaps">
<span id="s-std-fieldlookup-bboverlaps"></span><span id="bboverlaps"></span><span id="std-fieldlookup-bboverlaps"></span><h3><code class="docutils literal notranslate"><span>bboverlaps</span></code><a href="#bboverlaps" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/geometry_overlaps.html">PostGIS</a>,
MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>Tests if the geometry field’s bounding box overlaps the lookup geometry’s
bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__bboverlaps</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>poly</span> <span>&amp;&amp;</span> <span>geom</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>MBROverlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>MBROverlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>MbrOverlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-contained">
<span id="s-std-fieldlookup-contained"></span><span id="contained"></span><span id="std-fieldlookup-contained"></span><h3><code class="docutils literal notranslate"><span>contained</span></code><a href="#contained" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Contained.html">PostGIS</a>,
MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>Tests if the geometry field’s bounding box is completely contained by the
lookup geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__contained</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>poly</span> <span>@</span> <span>geom</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRWithin(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRWithin(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>MbrWithin(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-contains">
<span id="s-std-fieldlookup-gis-contains"></span><span id="contains"></span><span id="std-fieldlookup-gis-contains"></span><h3><code class="docutils literal notranslate"><span>contains</span></code><a href="#contains" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Contains.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field spatially contains the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__contains</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_CONTAINS(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Contains(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Contains(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-contains-properly">
<span id="s-std-fieldlookup-contains_properly"></span><span id="contains-properly"></span><span id="std-fieldlookup-contains_properly"></span><h3><code class="docutils literal notranslate"><span>contains_properly</span></code><a href="#contains-properly" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_ContainsProperly.html">PostGIS</a>,
PGRaster (Bilateral)</p>
<p>Returns true if the lookup geometry intersects the interior of the
geometry field, but not the boundary (or exterior).</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__contains_properly</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_ContainsProperly(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-coveredby">
<span id="s-std-fieldlookup-coveredby"></span><span id="coveredby"></span><span id="std-fieldlookup-coveredby"></span><h3><code class="docutils literal notranslate"><span>coveredby</span></code><a href="#coveredby" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_CoveredBy.html">PostGIS</a>,
Oracle, MySQL, PGRaster (Bilateral), SpatiaLite</p>
<p>Tests if no point in the geometry field is outside the lookup geometry.
<a href="#fncovers" id="id2" role="doc-noteref"><span>[</span>3<span>]</span></a></p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__coveredby</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_CoveredBy(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_COVEREDBY(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRCoveredBy(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>CoveredBy(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
<div>
<span>Changed in Django 5.2:</span> <p>MySQL support was added.</p>
</div>
</section>
<section id="s-covers">
<span id="s-std-fieldlookup-covers"></span><span id="covers"></span><span id="std-fieldlookup-covers"></span><h3><code class="docutils literal notranslate"><span>covers</span></code><a href="#covers" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Covers.html">PostGIS</a>,
Oracle, MySQL, PGRaster (Bilateral), SpatiaLite</p>
<p>Tests if no point in the lookup geometry is outside the geometry field.
<a href="#fncovers" id="id3" role="doc-noteref"><span>[</span>3<span>]</span></a></p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__covers</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Covers(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_COVERS(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>MBRCovers(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Covers(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
<div>
<span>Changed in Django 5.2:</span> <p>MySQL support was added.</p>
</div>
</section>
<section id="s-crosses">
<span id="s-std-fieldlookup-crosses"></span><span id="crosses"></span><span id="std-fieldlookup-crosses"></span><h3><code class="docutils literal notranslate"><span>crosses</span></code><a href="#crosses" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Crosses.html">PostGIS</a>,
MariaDB, MySQL, SpatiaLite, PGRaster (Conversion)</p>
<p>Tests if the geometry field spatially crosses the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__crosses</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Crosses(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Crosses(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-disjoint">
<span id="s-std-fieldlookup-disjoint"></span><span id="disjoint"></span><span id="std-fieldlookup-disjoint"></span><h3><code class="docutils literal notranslate"><span>disjoint</span></code><a href="#disjoint" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Disjoint.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field is spatially disjoint from the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__disjoint</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Disjoint(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.RELATE(poly,</span> <span>'DISJOINT',</span> <span>geom,</span> <span>0.05)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Disjoint(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Disjoint(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Disjoint(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-equals">
<span id="s-std-fieldlookup-equals"></span><span id="equals"></span><span id="std-fieldlookup-equals"></span><h3><code class="docutils literal notranslate"><span>equals</span></code><a href="#equals" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Equals.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Conversion)</p>
<p>Tests if the geometry field is spatially equal to the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__equals</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_EQUAL(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-exact-same-as">
<span id="s-std-fieldlookup-same_as"></span><span id="s-std-fieldlookup-exact-noindex"></span><span id="exact-same-as"></span><span id="std-fieldlookup-same_as"></span><span id="std-fieldlookup-exact-noindex"></span><h3><code class="docutils literal notranslate"><span>exact</span></code>, <code class="docutils literal notranslate"><span>same_as</span></code><a href="#exact-same-as" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Same.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field is “equal” to the lookup geometry. On Oracle,
MySQL, and SpatiaLite, it tests spatial equality, while on PostGIS it tests
equality of bounding boxes.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>poly</span> <span>~=</span> <span>geom</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_EQUAL(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Equals(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-intersects">
<span id="s-std-fieldlookup-intersects"></span><span id="intersects"></span><span id="std-fieldlookup-intersects"></span><h3><code class="docutils literal notranslate"><span>intersects</span></code><a href="#intersects" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Intersects.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field spatially intersects the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__intersects</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Intersects(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_OVERLAPBDYINTERSECT(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Intersects(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Intersects(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Intersects(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-isempty">
<span id="s-std-fieldlookup-isempty"></span><span id="isempty"></span><span id="std-fieldlookup-isempty"></span><h3><code class="docutils literal notranslate"><span>isempty</span></code><a href="#isempty" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_IsEmpty.html">PostGIS</a></p>
<p>Tests if the geometry is empty.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__isempty</span><span>=</span><span>True</span><span>)</span>
</pre></div>
</div>
</section>
<section id="s-isvalid">
<span id="s-std-fieldlookup-isvalid"></span><span id="isvalid"></span><span id="std-fieldlookup-isvalid"></span><h3><code class="docutils literal notranslate"><span>isvalid</span></code><a href="#isvalid" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: MySQL, <a href="https://postgis.net/docs/ST_IsValid.html">PostGIS</a>,
Oracle, SpatiaLite</p>
<p>Tests if the geometry is valid.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__isvalid</span><span>=</span><span>True</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>MySQL, PostGIS, SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_IsValid(poly)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT(poly,</span> <span>0.05)</span> <span>=</span> <span>'TRUE'</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-overlaps">
<span id="s-std-fieldlookup-overlaps"></span><span id="overlaps"></span><span id="std-fieldlookup-overlaps"></span><h3><code class="docutils literal notranslate"><span>overlaps</span></code><a href="#overlaps" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Overlaps.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field spatially overlaps the lookup geometry.</p>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Overlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_OVERLAPS(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Overlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Overlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Overlaps(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-relate">
<span id="s-std-fieldlookup-relate"></span><span id="relate"></span><span id="std-fieldlookup-relate"></span><h3><code class="docutils literal notranslate"><span>relate</span></code><a href="#relate" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Relate.html">PostGIS</a>,
MariaDB, Oracle, SpatiaLite, PGRaster (Conversion)</p>
<p>Tests if the geometry field is spatially related to the lookup geometry by
the values given in the given pattern.  This lookup requires a tuple parameter,
<code class="docutils literal notranslate"><span>(geom,</span> <span>pattern)</span></code>; the form of <code class="docutils literal notranslate"><span>pattern</span></code> will depend on the spatial backend:</p>
<section id="s-mariadb-postgis-and-spatialite">
<span id="mariadb-postgis-and-spatialite"></span><h4>MariaDB, PostGIS, and SpatiaLite<a href="#mariadb-postgis-and-spatialite" title="Link to this heading">¶</a></h4>
<p>On these spatial backends the intersection pattern is a string comprising
nine characters, which  define intersections between  the interior, boundary,
and exterior of the geometry field and the lookup geometry.
The intersection pattern matrix may only use the following characters:
<code class="docutils literal notranslate"><span>1</span></code>, <code class="docutils literal notranslate"><span>2</span></code>, <code class="docutils literal notranslate"><span>T</span></code>, <code class="docutils literal notranslate"><span>F</span></code>, or <code class="docutils literal notranslate"><span>*</span></code>.  This lookup type allows users to “fine tune”
a specific geometric relationship consistent with the DE-9IM model. <a href="#fnde9im" id="id4" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
<p>Geometry example:</p>
<div><div><pre><span></span><span># A tuple lookup parameter is used to specify the geometry and</span>
<span># the intersection pattern (the pattern here is for 'contains').</span>
<span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__relate</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>"T*T***FF*"</span><span>))</span>
</pre></div>
</div>
<p>PostGIS and MariaDB SQL equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>ST_Relate</span><span>(</span><span>poly</span><span>,</span><span> </span><span>geom</span><span>,</span><span> </span><span>'T*T***FF*'</span><span>)</span>
</pre></div>
</div>
<p>SpatiaLite SQL equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>Relate</span><span>(</span><span>poly</span><span>,</span><span> </span><span>geom</span><span>,</span><span> </span><span>'T*T***FF*'</span><span>)</span>
</pre></div>
</div>
<p>Raster example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__relate</span><span>=</span><span>(</span><span>rast</span><span>,</span> <span>1</span><span>,</span> <span>"T*T***FF*"</span><span>))</span>
<span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>rast__2__relate</span><span>=</span><span>(</span><span>rast</span><span>,</span> <span>1</span><span>,</span> <span>"T*T***FF*"</span><span>))</span>
</pre></div>
</div>
<p>PostGIS SQL equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>ST_Relate</span><span>(</span><span>poly</span><span>,</span><span> </span><span>ST_Polygon</span><span>(</span><span>rast</span><span>,</span><span> </span><span>1</span><span>),</span><span> </span><span>'T*T***FF*'</span><span>)</span>
<span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>ST_Relate</span><span>(</span><span>ST_Polygon</span><span>(</span><span>rast</span><span>,</span><span> </span><span>2</span><span>),</span><span> </span><span>ST_Polygon</span><span>(</span><span>rast</span><span>,</span><span> </span><span>1</span><span>),</span><span> </span><span>'T*T***FF*'</span><span>)</span>
</pre></div>
</div>
</section>
<section id="s-oracle">
<span id="oracle"></span><h4>Oracle<a href="#oracle" title="Link to this heading">¶</a></h4>
<p>Here the relation pattern is comprised of at least one of the nine relation
strings: <code class="docutils literal notranslate"><span>TOUCH</span></code>, <code class="docutils literal notranslate"><span>OVERLAPBDYDISJOINT</span></code>, <code class="docutils literal notranslate"><span>OVERLAPBDYINTERSECT</span></code>,
<code class="docutils literal notranslate"><span>EQUAL</span></code>, <code class="docutils literal notranslate"><span>INSIDE</span></code>, <code class="docutils literal notranslate"><span>COVEREDBY</span></code>, <code class="docutils literal notranslate"><span>CONTAINS</span></code>, <code class="docutils literal notranslate"><span>COVERS</span></code>, <code class="docutils literal notranslate"><span>ON</span></code>, and
<code class="docutils literal notranslate"><span>ANYINTERACT</span></code>.   Multiple strings may be combined with the logical Boolean
operator OR, for example, <code class="docutils literal notranslate"><span>'inside+touch'</span></code>. <a href="#fnsdorelate" id="id5" role="doc-noteref"><span>[</span>2<span>]</span></a>  The relation
strings are case-insensitive.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__relate</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>"anyinteract"</span><span>))</span>
</pre></div>
</div>
<p>Oracle SQL equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>SDO_RELATE</span><span>(</span><span>poly</span><span>,</span><span> </span><span>geom</span><span>,</span><span> </span><span>'anyinteract'</span><span>)</span>
</pre></div>
</div>
</section>
</section>
<section id="s-touches">
<span id="s-std-fieldlookup-touches"></span><span id="touches"></span><span id="std-fieldlookup-touches"></span><h3><code class="docutils literal notranslate"><span>touches</span></code><a href="#touches" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Touches.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite</p>
<p>Tests if the geometry field spatially touches the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__touches</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Touches(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Touches(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Touches(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_TOUCH(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Touches(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-within">
<span id="s-std-fieldlookup-within"></span><span id="within"></span><span id="std-fieldlookup-within"></span><h3><code class="docutils literal notranslate"><span>within</span></code><a href="#within" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Within.html">PostGIS</a>,
Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Bilateral)</p>
<p>Tests if the geometry field is spatially within the lookup geometry.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__within</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Within(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Within(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Within(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_INSIDE(poly,</span> <span>geom)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Within(poly,</span> <span>geom)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-left">
<span id="s-std-fieldlookup-left"></span><span id="left"></span><span id="std-fieldlookup-left"></span><h3><code class="docutils literal notranslate"><span>left</span></code><a href="#left" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Left.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box is strictly to the left of the
lookup geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__left</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&lt;&lt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-right">
<span id="s-std-fieldlookup-right"></span><span id="right"></span><span id="std-fieldlookup-right"></span><h3><code class="docutils literal notranslate"><span>right</span></code><a href="#right" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Right.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box is strictly to the right of the
lookup geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__right</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&gt;&gt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-overlaps-left">
<span id="s-std-fieldlookup-overlaps_left"></span><span id="overlaps-left"></span><span id="std-fieldlookup-overlaps_left"></span><h3><code class="docutils literal notranslate"><span>overlaps_left</span></code><a href="#overlaps-left" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Overleft.html">PostGIS</a>,
PGRaster (Bilateral)</p>
<p>Tests if the geometry field’s bounding box overlaps or is to the left of the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__overlaps_left</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&amp;&lt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-overlaps-right">
<span id="s-std-fieldlookup-overlaps_right"></span><span id="overlaps-right"></span><span id="std-fieldlookup-overlaps_right"></span><h3><code class="docutils literal notranslate"><span>overlaps_right</span></code><a href="#overlaps-right" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Overright.html">PostGIS</a>,
PGRaster (Bilateral)</p>
<p>Tests if the geometry field’s bounding box overlaps or is to the right of the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__overlaps_right</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&amp;&gt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-overlaps-above">
<span id="s-std-fieldlookup-overlaps_above"></span><span id="overlaps-above"></span><span id="std-fieldlookup-overlaps_above"></span><h3><code class="docutils literal notranslate"><span>overlaps_above</span></code><a href="#overlaps-above" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Overabove.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box overlaps or is above the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__overlaps_above</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>|&amp;&gt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-overlaps-below">
<span id="s-std-fieldlookup-overlaps_below"></span><span id="overlaps-below"></span><span id="std-fieldlookup-overlaps_below"></span><h3><code class="docutils literal notranslate"><span>overlaps_below</span></code><a href="#overlaps-below" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Overbelow.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box overlaps or is below the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__overlaps_below</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&amp;&lt;|</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-strictly-above">
<span id="s-std-fieldlookup-strictly_above"></span><span id="strictly-above"></span><span id="std-fieldlookup-strictly_above"></span><h3><code class="docutils literal notranslate"><span>strictly_above</span></code><a href="#strictly-above" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Above.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box is strictly above the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__strictly_above</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>|&gt;&gt;</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
<section id="s-strictly-below">
<span id="s-std-fieldlookup-strictly_below"></span><span id="strictly-below"></span><span id="std-fieldlookup-strictly_below"></span><h3><code class="docutils literal notranslate"><span>strictly_below</span></code><a href="#strictly-below" title="Link to this heading">¶</a></h3>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Geometry_Below.html">PostGIS</a>,
PGRaster (Conversion)</p>
<p>Tests if the geometry field’s bounding box is strictly below the lookup
geometry’s bounding box.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__strictly_below</span><span>=</span><span>geom</span><span>)</span>
</pre></div>
</div>
<p>PostGIS equivalent:</p>
<div><div><pre><span></span><span>SELECT</span><span> </span><span>...</span><span> </span><span>WHERE</span><span> </span><span>poly</span><span> </span><span>&lt;&lt;|</span><span> </span><span>geom</span>
</pre></div>
</div>
</section>
</section>
<section id="s-distance-lookups">
<span id="s-id6"></span><span id="distance-lookups"></span><span id="id6"></span><h2>Distance Lookups<a href="#distance-lookups" title="Link to this heading">¶</a></h2>
<p><em>Availability</em>: PostGIS, Oracle, MariaDB, MySQL, SpatiaLite, PGRaster (Native)</p>
<p>For an overview on performing distance queries, please refer to
the <a href="db-api.html#distance-queries"><span>distance queries introduction</span></a>.</p>
<p>Distance lookups take the following form:</p>
<div><div><pre><span></span>&lt;field&gt;__&lt;distance lookup&gt;=(&lt;geometry/raster&gt;, &lt;distance value&gt;[, "spheroid"])
&lt;field&gt;__&lt;distance lookup&gt;=(&lt;raster&gt;, &lt;band_index&gt;, &lt;distance value&gt;[, "spheroid"])
&lt;field&gt;__&lt;band_index&gt;__&lt;distance lookup&gt;=(&lt;raster&gt;, &lt;band_index&gt;, &lt;distance value&gt;[, "spheroid"])
</pre></div>
</div>
<p>The value passed into a distance lookup is a tuple; the first two
values are mandatory, and are the geometry to calculate distances to,
and a distance value (either a number in units of the field, a
<a href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span>Distance</span></code></a> object, or a <a href="../../models/expressions.html"><span>query
expression</span></a>). To pass a band index to the lookup, use
a 3-tuple where the second entry is the band index.</p>
<p>On every distance lookup except <a href="#std-fieldlookup-dwithin"><code class="xref std std-lookup docutils literal notranslate"><span>dwithin</span></code></a>, an optional element,
<code class="docutils literal notranslate"><span>'spheroid'</span></code>, may be included to use the more accurate spheroid distance
calculation functions on fields with a geodetic coordinate system.</p>
<p>On PostgreSQL, the <code class="docutils literal notranslate"><span>'spheroid'</span></code> option uses <a href="https://postgis.net/docs/ST_Distance_Spheroid.html">ST_DistanceSpheroid</a> instead of
<a href="https://postgis.net/docs/ST_DistanceSphere.html">ST_DistanceSphere</a>. The
simpler <a href="https://postgis.net/docs/ST_Distance.html">ST_Distance</a> function is
used with projected coordinate systems. Rasters are converted to geometries for
spheroid based lookups.</p>
<section id="s-distance-gt">
<span id="s-std-fieldlookup-distance_gt"></span><span id="distance-gt"></span><span id="std-fieldlookup-distance_gt"></span><h3><code class="docutils literal notranslate"><span>distance_gt</span></code><a href="#distance-gt" title="Link to this heading">¶</a></h3>
<p>Returns models where the distance to the geometry field from the lookup
geometry is greater than the given distance value.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__distance_gt</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>D</span><span>(</span><span>m</span><span>=</span><span>5</span><span>)))</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance/ST_Distance_Sphere(poly,</span> <span>geom)</span> <span>&gt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&gt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&gt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.SDO_DISTANCE(poly,</span> <span>geom,</span> <span>0.05)</span> <span>&gt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Distance(poly,</span> <span>geom)</span> <span>&gt;</span> <span>5</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-distance-gte">
<span id="s-std-fieldlookup-distance_gte"></span><span id="distance-gte"></span><span id="std-fieldlookup-distance_gte"></span><h3><code class="docutils literal notranslate"><span>distance_gte</span></code><a href="#distance-gte" title="Link to this heading">¶</a></h3>
<p>Returns models where the distance to the geometry field from the lookup
geometry is greater than or equal to the given distance value.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__distance_gte</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>D</span><span>(</span><span>m</span><span>=</span><span>5</span><span>)))</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance/ST_Distance_Sphere(poly,</span> <span>geom)</span> <span>&gt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&gt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&gt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.SDO_DISTANCE(poly,</span> <span>geom,</span> <span>0.05)</span> <span>&gt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Distance(poly,</span> <span>geom)</span> <span>&gt;=</span> <span>5</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-distance-lt">
<span id="s-std-fieldlookup-distance_lt"></span><span id="distance-lt"></span><span id="std-fieldlookup-distance_lt"></span><h3><code class="docutils literal notranslate"><span>distance_lt</span></code><a href="#distance-lt" title="Link to this heading">¶</a></h3>
<p>Returns models where the distance to the geometry field from the lookup
geometry is less than the given distance value.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__distance_lt</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>D</span><span>(</span><span>m</span><span>=</span><span>5</span><span>)))</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance/ST_Distance_Sphere(poly,</span> <span>geom)</span> <span>&lt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&lt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&lt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.SDO_DISTANCE(poly,</span> <span>geom,</span> <span>0.05)</span> <span>&lt;</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Distance(poly,</span> <span>geom)</span> <span>&lt;</span> <span>5</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-distance-lte">
<span id="s-std-fieldlookup-distance_lte"></span><span id="distance-lte"></span><span id="std-fieldlookup-distance_lte"></span><h3><code class="docutils literal notranslate"><span>distance_lte</span></code><a href="#distance-lte" title="Link to this heading">¶</a></h3>
<p>Returns models where the distance to the geometry field from the lookup
geometry is less than or equal to the given distance value.</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__distance_lte</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>D</span><span>(</span><span>m</span><span>=</span><span>5</span><span>)))</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance/ST_Distance_Sphere(poly,</span> <span>geom)</span> <span>&lt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MariaDB</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&lt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>MySQL</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_Distance(poly,</span> <span>geom)</span> <span>&lt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_GEOM.SDO_DISTANCE(poly,</span> <span>geom,</span> <span>0.05)</span> <span>&lt;=</span> <span>5</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>Distance(poly,</span> <span>geom)</span> <span>&lt;=</span> <span>5</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-dwithin">
<span id="s-std-fieldlookup-dwithin"></span><span id="dwithin"></span><span id="std-fieldlookup-dwithin"></span><h3><code class="docutils literal notranslate"><span>dwithin</span></code><a href="#dwithin" title="Link to this heading">¶</a></h3>
<p>Returns models where the distance to the geometry field from the lookup
geometry are within the given distance from one another. Note that you can only
provide <a href="measure.html#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code class="xref py py-class docutils literal notranslate"><span>Distance</span></code></a> objects if the targeted
geometries are in a projected system. For geographic geometries, you should use
units of the geometry field (e.g. degrees for <code class="docutils literal notranslate"><span>WGS84</span></code>) .</p>
<p>Example:</p>
<div><div><pre><span></span><span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__dwithin</span><span>=</span><span>(</span><span>geom</span><span>,</span> <span>D</span><span>(</span><span>m</span><span>=</span><span>5</span><span>)))</span>
</pre></div>
</div>
<table>
<thead>
<tr><th><p>Backend</p></th>
<th><p>SQL Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>PostGIS</p></td>
<td><p><code class="docutils literal notranslate"><span>ST_DWithin(poly,</span> <span>geom,</span> <span>5)</span></code></p></td>
</tr>
<tr><td><p>Oracle</p></td>
<td><p><code class="docutils literal notranslate"><span>SDO_WITHIN_DISTANCE(poly,</span> <span>geom,</span> <span>5)</span></code></p></td>
</tr>
<tr><td><p>SpatiaLite</p></td>
<td><p><code class="docutils literal notranslate"><span>PtDistWithin(poly,</span> <span>geom,</span> <span>5)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="s-aggregate-functions">
<span id="s-gis-aggregation-functions"></span><span id="aggregate-functions"></span><span id="gis-aggregation-functions"></span><h3>Aggregate Functions<a href="#aggregate-functions" title="Link to this heading">¶</a></h3>
<p>Django provides some GIS-specific aggregate functions. For details on how to
use these aggregate functions, see <a href="../../../topics/db/aggregation.html"><span>the topic guide on aggregation</span></a>.</p>
<table>
<thead>
<tr><th><p>Keyword Argument</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr><td><p><code class="docutils literal notranslate"><span>tolerance</span></code></p></td>
<td><p>This keyword is for Oracle only.  It is for the
tolerance value used by the <code class="docutils literal notranslate"><span>SDOAGGRTYPE</span></code>
procedure; the  <a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/spatl/spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">Oracle documentation</a> has more
details.</p></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>from</span><span> </span><span>django.contrib.gis.db.models</span><span> </span><span>import</span> <span>Extent</span><span>,</span> <span>Union</span>
<span>&gt;&gt;&gt; </span><span>WorldBorder</span><span>.</span><span>objects</span><span>.</span><span>aggregate</span><span>(</span><span>Extent</span><span>(</span><span>"mpoly"</span><span>),</span> <span>Union</span><span>(</span><span>"mpoly"</span><span>))</span>
</pre></div>
</div>
<section id="s-collect">
<span id="collect"></span><h4><code class="docutils literal notranslate"><span>Collect</span></code><a href="#collect" title="Link to this heading">¶</a></h4>
<dl>
<dt id="django.contrib.gis.db.models.Collect">
<em><span><span>class</span></span><span> </span></em><span><span>Collect</span></span>(<em><span><span>geo_field</span></span></em>, <em><span><span>filter</span></span><span><span>=</span></span><span><span>None</span></span></em>)<a href="https://github.com/django/django/blob/stable/5.2.x/django/contrib/gis/db/models/aggregates.py#L61"><span><span>[source]</span></span></a><a href="#django.contrib.gis.db.models.Collect" title="Link to this definition">¶</a></dt>
<dd></dd></dl>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Collect.html">PostGIS</a>, MySQL,
SpatiaLite</p>
<p>Returns a <code class="docutils literal notranslate"><span>GEOMETRYCOLLECTION</span></code> or a <code class="docutils literal notranslate"><span>MULTI</span></code> geometry object from the geometry
column. This is analogous to a simplified version of the <a href="#django.contrib.gis.db.models.Union" title="django.contrib.gis.db.models.Union"><code class="xref py py-class docutils literal notranslate"><span>Union</span></code></a>
aggregate, except it can be several orders of magnitude faster than performing
a union because it rolls up geometries into a collection or multi object, not
caring about dissolving boundaries.</p>
<div>
<span>Changed in Django 5.1:</span> <p>MySQL 8.0.24+ support was added.</p>
</div>
</section>
<section id="s-extent">
<span id="extent"></span><h4><code class="docutils literal notranslate"><span>Extent</span></code><a href="#extent" title="Link to this heading">¶</a></h4>
<dl>
<dt id="django.contrib.gis.db.models.Extent">
<em><span><span>class</span></span><span> </span></em><span><span>Extent</span></span>(<em><span><span>geo_field</span></span></em>, <em><span><span>filter</span></span><span><span>=</span></span><span><span>None</span></span></em>)<a href="https://github.com/django/django/blob/stable/5.2.x/django/contrib/gis/db/models/aggregates.py#L66"><span><span>[source]</span></span></a><a href="#django.contrib.gis.db.models.Extent" title="Link to this definition">¶</a></dt>
<dd></dd></dl>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Extent.html">PostGIS</a>,
Oracle, SpatiaLite</p>
<p>Returns the extent of all <code class="docutils literal notranslate"><span>geo_field</span></code> in the <code class="docutils literal notranslate"><span>QuerySet</span></code> as a 4-tuple,
comprising the lower left coordinate and the upper right coordinate.</p>
<p>Example:</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>qs</span> <span>=</span> <span>City</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>name__in</span><span>=</span><span>(</span><span>"Houston"</span><span>,</span> <span>"Dallas"</span><span>))</span><span>.</span><span>aggregate</span><span>(</span><span>Extent</span><span>(</span><span>"poly"</span><span>))</span>
<span>&gt;&gt;&gt; </span><span>print</span><span>(</span><span>qs</span><span>[</span><span>"poly__extent"</span><span>])</span>
<span>(-96.8016128540039, 29.7633724212646, -95.3631439208984, 32.782058715820)</span>
</pre></div>
</div>
</section>
<section id="s-extent3d">
<span id="extent3d"></span><h4><code class="docutils literal notranslate"><span>Extent3D</span></code><a href="#extent3d" title="Link to this heading">¶</a></h4>
<dl>
<dt id="django.contrib.gis.db.models.Extent3D">
<em><span><span>class</span></span><span> </span></em><span><span>Extent3D</span></span>(<em><span><span>geo_field</span></span></em>, <em><span><span>filter</span></span><span><span>=</span></span><span><span>None</span></span></em>)<a href="https://github.com/django/django/blob/stable/5.2.x/django/contrib/gis/db/models/aggregates.py#L77"><span><span>[source]</span></span></a><a href="#django.contrib.gis.db.models.Extent3D" title="Link to this definition">¶</a></dt>
<dd></dd></dl>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_3DExtent.html">PostGIS</a></p>
<p>Returns the 3D extent of all <code class="docutils literal notranslate"><span>geo_field</span></code> in the <code class="docutils literal notranslate"><span>QuerySet</span></code> as a 6-tuple,
comprising the lower left coordinate and upper right coordinate (each with x, y,
and z coordinates).</p>
<p>Example:</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>qs</span> <span>=</span> <span>City</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>name__in</span><span>=</span><span>(</span><span>"Houston"</span><span>,</span> <span>"Dallas"</span><span>))</span><span>.</span><span>aggregate</span><span>(</span><span>Extent3D</span><span>(</span><span>"poly"</span><span>))</span>
<span>&gt;&gt;&gt; </span><span>print</span><span>(</span><span>qs</span><span>[</span><span>"poly__extent3d"</span><span>])</span>
<span>(-96.8016128540039, 29.7633724212646, 0, -95.3631439208984, 32.782058715820, 0)</span>
</pre></div>
</div>
</section>
<section id="s-makeline">
<span id="makeline"></span><h4><code class="docutils literal notranslate"><span>MakeLine</span></code><a href="#makeline" title="Link to this heading">¶</a></h4>
<dl>
<dt id="django.contrib.gis.db.models.MakeLine">
<em><span><span>class</span></span><span> </span></em><span><span>MakeLine</span></span>(<em><span><span>geo_field</span></span></em>, <em><span><span>filter</span></span><span><span>=</span></span><span><span>None</span></span></em>)<a href="https://github.com/django/django/blob/stable/5.2.x/django/contrib/gis/db/models/aggregates.py#L88"><span><span>[source]</span></span></a><a href="#django.contrib.gis.db.models.MakeLine" title="Link to this definition">¶</a></dt>
<dd></dd></dl>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_MakeLine.html">PostGIS</a>,
SpatiaLite</p>
<p>Returns a <code class="docutils literal notranslate"><span>LineString</span></code> constructed from the point field geometries in the
<code class="docutils literal notranslate"><span>QuerySet</span></code>. Currently, ordering the queryset has no effect.</p>
<p>Example:</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>qs</span> <span>=</span> <span>City</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>name__in</span><span>=</span><span>(</span><span>"Houston"</span><span>,</span> <span>"Dallas"</span><span>))</span><span>.</span><span>aggregate</span><span>(</span><span>MakeLine</span><span>(</span><span>"poly"</span><span>))</span>
<span>&gt;&gt;&gt; </span><span>print</span><span>(</span><span>qs</span><span>[</span><span>"poly__makeline"</span><span>])</span>
<span>LINESTRING (-95.3631510000000020 29.7633739999999989, -96.8016109999999941 32.7820570000000018)</span>
</pre></div>
</div>
</section>
<section id="s-union">
<span id="union"></span><h4><code class="docutils literal notranslate"><span>Union</span></code><a href="#union" title="Link to this heading">¶</a></h4>
<dl>
<dt id="django.contrib.gis.db.models.Union">
<em><span><span>class</span></span><span> </span></em><span><span>Union</span></span>(<em><span><span>geo_field</span></span></em>, <em><span><span>filter</span></span><span><span>=</span></span><span><span>None</span></span></em>)<a href="https://github.com/django/django/blob/stable/5.2.x/django/contrib/gis/db/models/aggregates.py#L93"><span><span>[source]</span></span></a><a href="#django.contrib.gis.db.models.Union" title="Link to this definition">¶</a></dt>
<dd></dd></dl>
<p><em>Availability</em>: <a href="https://postgis.net/docs/ST_Union.html">PostGIS</a>,
Oracle, SpatiaLite</p>
<p>This method returns a <a href="geos.html#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code class="xref py py-class docutils literal notranslate"><span>GEOSGeometry</span></code></a> object
comprising the union of every geometry in the queryset. Please note that use of
<code class="docutils literal notranslate"><span>Union</span></code> is processor intensive and may take a significant amount of time on
large querysets.</p>
<div>
<p>Note</p>
<p>If the computation time for using this method is too expensive, consider
using <a href="#django.contrib.gis.db.models.Collect" title="django.contrib.gis.db.models.Collect"><code class="xref py py-class docutils literal notranslate"><span>Collect</span></code></a> instead.</p>
</div>
<p>Example:</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>u</span> <span>=</span> <span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>aggregate</span><span>(</span><span>Union</span><span>(</span><span>poly</span><span>))</span>  <span># This may take a long time.</span>
<span>&gt;&gt;&gt; </span><span>u</span> <span>=</span> <span>Zipcode</span><span>.</span><span>objects</span><span>.</span><span>filter</span><span>(</span><span>poly__within</span><span>=</span><span>bbox</span><span>)</span><span>.</span><span>aggregate</span><span>(</span>
<span>... </span>    <span>Union</span><span>(</span><span>poly</span><span>)</span>
<span>... </span><span>)</span>  <span># A more sensible approach.</span>
</pre></div>
</div>
<p>Footnotes</p>

</section>
</section>
</section>
</section>
</div>
</div>
</div>

</div>

</div>
<div></div>
</div>
</body>
